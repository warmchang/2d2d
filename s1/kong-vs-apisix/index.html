<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport"
              content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>云原生时代的中外 API 网关之争</title>
<meta name="description" content="API 网关是企业应用的关键基础组件和流量入口，目前绝大部分 API 网关市场份额都被几大公有云厂商占据（AWS API Gateway, Google Apigee, 阿里云 API 网关等）。但是公有云厂商的 API 网关不符合 CNCF 的云原生理念，如果你用了阿里云的 API 网关，你就会被被它锁定了，因为网关是流量的入口，你没有办法分发到其它云厂商上。CNCF 全景图的 API Gate">
<meta property="og:type" content="website">
<meta property="og:title" content="云原生时代的中外 API 网关之争">
<meta property="og:description" content="API 网关是企业应用的关键基础组件和流量入口，目前绝大部分 API 网关市场份额都被几大公有云厂商占据（AWS API Gateway, Google Apigee, 阿里云 API 网关等）。但是公有云厂商的 API 网关不符合 CNCF 的云原生理念，如果你用了阿里云的 API 网关，你就会被被它锁定了，因为网关是流量的入口，你没有办法分发到其它云厂商上。CNCF 全景图的 API Gate">
<meta name="twitter:title" content="云原生时代的中外 API 网关之争">
<meta name="twitter:description" content="API 网关是企业应用的关键基础组件和流量入口，目前绝大部分 API 网关市场份额都被几大公有云厂商占据（AWS API Gateway, Google Apigee, 阿里云 API 网关等）。但是公有云厂商的 API 网关不符合 CNCF 的云原生理念，如果你用了阿里云的 API 网关，你就会被被它锁定了，因为网关是流量的入口，你没有办法分发到其它云厂商上。CNCF 全景图的 API Gate">
<meta property="og:url" content="https://2d2d.io/s1/kong-vs-apisix">
    <meta property="twitter:url" content="https://2d2d.io/s1/kong-vs-apisix">
<meta name="twitter:card" content="summary_large_image">
    <meta property="og:image" content="https://2d2d.io/static/s1/4/vs.png">
    <meta name="twitter:image" content="https://2d2d.io/static/s1/4/vs.png">
<link rel="icon" type="image/png" href="/favicon.ico">
        <link rel="stylesheet" href="/static/zine.css">
        <link rel="alternate"
              type="application/atom+xml"
              title="TO-D 杂志 RSS"
              href="/feed.xml">
        <link rel="stylesheet" href="/static/footer.css">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PFMPLGGJHQ"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', 'G-PFMPLGGJHQ');
</script>
        <style>
            :root {
                --primary-color: #bbdaf3;
                --main-color: #000;
                --link-color: #e07312;
                --secondary-color: #eff3f7;
            }
        </style>
    </head>
    <body class="h-full bg-secondary">
        <div class="bg-primary text-main font-bold text-center z-0"
                 style="background-image: url('/static/pattern.svg')">
            <header class="p-8 md:p-10">
                    <div class="text-4xl lg:text-5xl">
                        <a href="/">TO-D 杂志</a>
                    </div>
                    <ul>
                        <li class="inline-block mt-6 mx-5 text-base hover:underline">
                                <a href="/about">关于</a>
                            </li>
                        <li class="inline-block mt-6 mx-5 text-base hover:underline">
                                <a href="/blog">博客</a>
                            </li>
                        <li class="inline-block mt-6 mx-5 text-base hover:underline">
                                <a href="/review">读者好评</a>
                            </li>
                        <li class="inline-block mt-6 mx-5 text-base hover:underline">
                                <a href="/sponsor">赞助</a>
                            </li>
                        <li class="inline-block mt-6 mx-5 text-base hover:underline">
                                <a href="https://github.com/zineland/2d2d">GitHub</a>
                            </li>
                        </ul>
                </header>
                <div class="w-full h-32 md:h-36 lg:h-44 xl:h-48 2xl:h-56"></div>
            </div>
            <main class="pb-10 -translate-y-32 md:-translate-y-32 lg:-translate-y-36 xl:-translate-y-44 2xl:-translate-y-56 mx-auto sm:max-w-scree-md md:max-w-screen-lg">
                <div class="p-4 pb-10 md:p-8 md:pb-14 mx-4 my-6 bg-white shadow-xl shadow-slate-700/10 ring-1 ring-gray-900/5">
        <div class="relative mx-2">
            <a class="before:block before:absolute before:-inset-1 before:-skew-x-6 before:bg-primary relative inline-block transition sm:hover:scale-110 duration-500"
               href="/s1">
                <div class="relative text-main px-4">第一季</div>
            </a>
            <span class="ml-2 text-gray-700">/  第 ⁨4⁩ 篇</span>
        </div>
        <div class="mt-4 mb-8 w-full border-dashed border-t border-slate-300"></div>
        <div class="prose mx-auto">
            <h1 class="text-center">云原生时代的中外 API 网关之争</h1>
            <div class="flex items-center justify-between text-gray-500">
                <span>2022-01-13</span>
                <a class="flex items-center px-2 py-1 !text-gray-500 rounded hover:bg-gray-200 hover:!no-underline"
           href="/@folyd">
            <img class="!m-0 !p-1 w-7 h-7 rounded-full object-cover"
                 src="/static/avatar/folyd.jpg"
                 alt="avatar"
                 loading="lazy">
            <span>
                Folyd
                </span>
        </a>
    
            </div>
        </div>
        <article class="prose mx-auto my-12">
            <p>API 网关是企业应用的关键基础组件和流量入口，<strong>目前绝大部分 API 网关市场份额都被几大公有云厂商占据</strong>（AWS API Gateway, Google Apigee, 阿里云 API 网关等）。但是公有云厂商的 API 网关不符合 CNCF 的云原生理念，如果你用了阿里云的 API 网关，你就会被被它锁定了，因为网关是流量的入口，你没有办法分发到其它云厂商上。CNCF 全景图的 API Gateway 分类下有数十款产品，但并不包含公有云厂商的那些。</p>
<p><img src="/static/s1/4/api-gateway.png" alt="" loading="lazy"></p>
<p>上图中有一半是大厂的产品，比如 3Scale 是 RedHat 的，Akana 是 Perforce 的闭源商业化产品，MuleSoft 是老牌软件厂商，2018 年被 Salesforce 收购。值得注意的是，来自中国的有四款产品，分别是（按字母序）:</p>
<ul>
<li><a href="http://apioak.com/">Apioak</a> - 国内的开源项目，背后似乎并没有商业化公司。</li>
<li><a href="https://apisix.apache.org/">Apache APISIX</a> - 国内初创公司支流科技捐赠给 Apache 的产品。</li>
<li><a href="https://megaease.com/zh/easegress/">Easegress</a> - 国内知名技术 KOL 左耳朵耗子陈皓的创业公司主打产品。</li>
<li><a href="https://github.com/alibaba/Sentinel">Sentinel</a> - 阿里云开源的云原生 API Gateway 组件。</li>
</ul>
<p>近几年来，国内在开源社区的影响力越来越显著，其中 Apache APISIX 其背后的公司支流科技便是其中之一。上图中的 <strong>Kong 则是海外另一家独角兽公司，支流科技和 Kong 两者有很多相似之处，他们在云原生网关赛道彼此博弈，算得上是一场国内与海外的较量。</strong></p>
<p>首先简单介绍一下这两家公司：</p>
<h2 id="kong" class="flex group">
<span>Kong</span>
<a href="#kong"
   class="ml-2 inline-flex items-center opacity-0 border-0 group-hover:opacity-100"
   aria-label="Anchor">
    <div class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
        <svg width="12" height="12" fill="none" aria-hidden="true">
            <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round">
            </path>
        </svg>
    </div>
</a>
</h2>
<p><a href="https://konghq.com/">Kong</a> 的前身是 2010 年成立于意大利的 Mashape，2015 年发布了 Kong 网关这款产品，后来 2017 年转型成现在的 Kong Inc，地点美国加州。算是一家以开源 API 网关产品起家，后续扩展到 Service Mesh，API 工具等产品的 To B SaaS 软件公司。最新一轮融资是 2021 年 2 月份，1 亿美金 D 轮，估值 14 亿美金，投资方包括高盛、A16Z 等知名机构。其主要产品有：</p>
<ul>
<li>
<p><a href="https://konghq.com/kong/">Kong Gateway</a> - Kong 的 API 网关产品，既是发家之作，也是主打产品；</p>
</li>
<li>
<p><a href="https://kuma.io/">Kuma</a> - Kong 捐赠给 CNCF 的 Service Mesh 项目；</p>
</li>
<li>
<p><a href="https://konghq.com/kong-mesh/">Kong Mesh</a> - Kong 基于 Kuma 的商业版 Service Mesh 产品；</p>
</li>
<li>
<p><a href="https://konghq.com/kong-konnect/">Kong Konnect</a> - 连接 Kong 旗下 Gateway，Mesh 和 Insomnia 的聚合性产品；</p>
</li>
<li>
<p><a href="https://insomnia.rest/">Insomnia</a> - Kong 于 2019 年从一位独立开发者那里<a href="https://konghq.com/blog/kong-acquires-insomnia/">收购</a>的开源 API 调式、测试产品，类似于 Postman。</p>
<blockquote>
<p>笔者于 2017 年在 IndieHackers 上和 Insomnia 的作者有过关于他的产品名字的交流。作者回复 Insomnia 的产品名是一个双关语。Insomnia 是失眠的意思，而失眠需要休息 (rest)，而 Insomnia 就是一款 REST API 调试工具，域名也是 <a href="https://insomnia.rest">https://insomnia.rest</a>.</p>
<p><img src="/static/s1/4/insomnia.png" alt="" loading="lazy"></p>
</blockquote>
</li>
</ul>
<h2 id="支流科技" class="flex group">
<span>支流科技</span>
<a href="#支流科技"
   class="ml-2 inline-flex items-center opacity-0 border-0 group-hover:opacity-100"
   aria-label="Anchor">
    <div class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
        <svg width="12" height="12" fill="none" aria-hidden="true">
            <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round">
            </path>
        </svg>
    </div>
</a>
</h2>
<p><a href="https://www.apiseven.com/">支流科技</a>是一家于 2019 年 4 月在深圳成立的开源商业化公司，他们的开源产品名叫 APISIX。支流科技获得真格基金、顺为资本、经纬中国等知名机构的投资，最新一轮为 2021 年 6 月经纬中国的数百万美元 A+ 轮融资。目前他们的主要产品有：</p>
<ul>
<li><a href="https://apisix.apache.org/">Apache APISIX</a> - 支流科技捐赠给 Apache 的开源 API 网关项目。APISIX 于 2019 年 6 月份开源，7 月份加入到 CNCF 全景图，10 月份进入 Apache 孵化器。2020 年 Apache APISIX 毕业，成为中国最快毕业的 Apache 顶级项目。</li>
<li><a href="https://github.com/apache/apisix-ingress-controller">apisix-ingress-controller</a> - 基于 Apache APISIX 的 Kubernetes Ingress 控制面组件，也捐赠给了 Apache。</li>
<li><a href="https://github.com/api7/apisix-mesh-agent">apisix-mesh-agent</a> - 基于 Apache APISIX 的 Service Mesh 产品，目前是支流科技自己的产品，并未捐给 Apache。</li>
</ul>
<blockquote>
<p>很有意思的是支流科技的产品叫 APISIX，而他们公司英文名叫 Apiseven，域名是 <a href="http://apiseven.com">apiseven.com</a>。</p>
</blockquote>
<h2 id="对比" class="flex group">
<span>对比</span>
<a href="#对比"
   class="ml-2 inline-flex items-center opacity-0 border-0 group-hover:opacity-100"
   aria-label="Anchor">
    <div class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
        <svg width="12" height="12" fill="none" aria-hidden="true">
            <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round">
            </path>
        </svg>
    </div>
</a>
</h2>
<p><img src="/static/s1/4/vs-lite.png" alt="" loading="lazy"></p>
<p><strong>Kong 和支流科技有很多相似的地方，在这场市场较量中也体现着中美两种开源商业化公司的差异。</strong></p>
<p><strong>相似点：</strong></p>
<ul>
<li>Kong Gateway 和 Apache APISIX 同样是基于 Nginx/OpenResty + Lua 的方案。支流科技创始人说是看到 Kong 的方案性能不够好，于是自己重新基于 OpenResty 自研的 APISIX；</li>
<li>两家公司都从 API Gateway 扩展到 Service Mesh 等产品；</li>
<li>两家公司都给知名开源孵化器捐赠了自己的项目；</li>
<li>两家公司都采用类似的开源版免费，企业版付费的商业化策略；</li>
</ul>
<p><strong>差异点：</strong></p>
<ul>
<li>Kong 从成立之初就面向全球市场，而支流科技目前绝大多数客户都是中国企业，相对于 Kong 来说全球市场经验是短板。</li>
<li>Kong 是典型的欧美 To B 公司，品牌打造、市场策略、产品并购与融资等方面都比较成熟。支流科技成立虽然晚两年，但这方面综合能力差距远远不止两年。</li>
</ul>
<p>很高兴看到中国诞生了支流科技这样的公司，虽然比 Kong 发力要晚，但相对于 Kong 的产品来说，支流科技 APISIX 的性能、社区活跃度、贡献者人数并不亚于 Kong。Apache APISIX 代表着中国开源项目的质量，但企业级 SaaS 方面的经验我们确实还有很多需要向欧美学习。我们也期待支流科技未来越来越好，同时也期待更多的中国软件产品走向世界。</p>

            </article>
        <div class="my-4 w-full border-dashed border-t border-slate-300"></div>
            <div class="flex flex-col md:flex-row">
                <a class="inline my-1 py-2 px-4 font-bold text-slate-700 hover:underline"
                           href="/s1/hashicorp">
                            上一篇：
                            时势造英雄-HashiCorp
                        </a>
                    <a class="inline my-1 py-2 px-4 font-bold text-slate-700 hover:underline"
                           href="/s1/coreos">
                            下一篇：
                            云原生的一代传奇 CoreOS
                        </a>
                    </div>
        </div>
</main>
            <footer class="relative">
                <div class="bg-neutral-900 p-10 pt-20 text-slate-300 translate-y-[-8rem]">
    <div class="flex justify-center mb-28 top-16 font-bold">
        <div class="text-sm md:text-2xl border-solid border-2 border-[#ffb52f] py-3">
            <span class="text-main bg-primary p-4">订阅方式：</span>
            <span class="px-2 md:px-4">
                <a class="hover:underline" href="/feed.xml">RSS</a>、
                <a class="hover:underline" href="https://t.me/tod_magazine">Telegram 频道</a>
            </span>
        </div>
    </div>
    <div class="container mx-auto flex flex-col sm:flex-row">
        <div class="text-sm max-w-sm">
            <div class="bg-primary w-12 h-5 my-4"></div>
            <a class="text-4xl font-bold text-slate-100" href="/">TO-D 杂志</a>
            <div class="py-6">
                专注于探讨全球 To-D 领域相关产品、创业公司、融资等资讯的专栏杂志。
            </div>
        </div>
        <div class="flex flex-col sm:flex-row sm:justify-around grow">
            <div class="pt-12 sm:pt-0">
                <div class="bg-primary w-5 h-5 my-4"></div>
                <div class="text-xl font-bold mb-4">责任编辑</div>
                <a class="my-2 block hover:underline" href="https://folyd.com">@Folyd</a>
            </div>
            <div class="pt-12 sm:pt-0">
                <div class="bg-primary w-5 h-5 my-4"></div>
                <div class="text-xl font-bold mb-4">更多</div>
                <a class="my-2 block hover:underline" href="/about">关于杂志</a>
                <a class="my-2 block hover:underline" href="/sponsor">赞助支持</a>
                <a class="my-2 block hover:underline" href="/blog">博客</a>
                <a class="my-2 block hover:underline" href="/faq">常见问题</a>
                <a class="my-2 block hover:underline" href="https://github.com/zineland/2d2d">Github</a>
            </div>
        </div>
    </div>
</div>
<div class="absolute bottom-0 left-0 right-0 h-36 bg-neutral-900">
    <div class="text-xs text-slate-400 text-center mt-12">
        Copyright © 2022 TO-D 杂志
    </div>
</div>
                <a href="https://github.com/zineland"
                   class="absolute z-20 bottom-0 w-full text-center font-bold md:text-slate-100 md:opacity-10 md:hover:opacity-50 md:bg-transparent bg-primary p-2 text-main">
                    Proudly powered by Zine.
                </a>
            </div>
        </footer>
    </body>
    <script src="/static/medium-zoom.min.js"></script>
    <script src="/static/zine.js"></script>
</html>
